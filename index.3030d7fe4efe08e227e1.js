"use strict";(self.webpackChunkkyogacha=self.webpackChunkkyogacha||[]).push([[826],{426:(n,r,e)=>{e.d(r,{Z:()=>s});var t=e(81),i=e.n(t),a=e(645),o=e.n(a)()(i());o.push([n.id,"@import url(https://fonts.googleapis.com/css2?family=Black+Han+Sans&display=swap);"]),o.push([n.id,"@import url(https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap);"]),o.push([n.id,":root {\r\n    --main-min-width: 320px;\r\n    --main-min-height: 560px;\r\n    --main-max-width: 720px;\r\n    --main-max-height: 720px;\r\n\r\n    --panel-max-width: 300px;\r\n\r\n    --pic-glow-hover: 6px;\r\n\r\n    --panel-border-radius: 10px;\r\n\r\n    --collection-height: 400px;\r\n    --collection-inner-height: 380px;\r\n\r\n    --color-box-shadow: #4e4e4e;\r\n    --box-shadow-panel: var(--color-box-shadow) 0 0 1px, var(--color-box-shadow) 0 2px;\r\n}\r\n\r\n@font-face {\r\n    font-family: 'SBAggroM';\r\n    src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2108@1.1/SBAggroM.woff') format('woff');\r\n    font-weight: normal;\r\n    font-style: normal;\r\n}\r\n\r\n* {\r\n    user-select: none;\r\n    text-align: center;\r\n    justify-content: center;\r\n    align-items: center;\r\n    vertical-align: middle;\r\n    align-self: center;\r\n\r\n    font-family: 'Noto Sans KR', sans-serif;\r\n    color: #3e3535;\r\n}\r\n\r\nhtml, body, main {\r\n    /* overflow-y: auto;\r\n    overflow-x: hidden; */\r\n    overflow: visible;\r\n    width: 100%;\r\n    height: 100%;\r\n    margin: 0;\r\n    padding: 0;\r\n\r\n    /* background-color: red; */\r\n}\r\n\r\nspan, h2 {\r\n    margin: 0;\r\n    padding: 0;\r\n}\r\n\r\nbutton {\r\n    cursor: pointer;\r\n}\r\n\r\nbody {\r\n    display: flex;\r\n    /* background: linear-gradient(135deg, #ffcbed, #bbe6ff); */\r\n    background: linear-gradient(45deg, transparent 50%, #ffffff20 50%) -10px 0/ 40px 40px, linear-gradient(135deg, #ffcbed, #bbe6ff);\r\n\r\n    /* zoom: .5; */\r\n}\r\n\r\nmain {\r\n    position: relative;\r\n    display: flex;\r\n    flex-direction: column;\r\n    /* background-color: red; */\r\n    min-width: var(--main-min-width);\r\n    max-width: var(--main-max-width);\r\n    min-height: var(--main-min-height);\r\n    max-height: var(--main-max-height);\r\n\r\n    overflow: hidden;\r\n}\r\n\r\nh2 {\r\n    font-weight: bold;\r\n    font-size: 30px;\r\n}\r\n\r\n.hidden {\r\n    display: none;\r\n    visibility: hidden;\r\n}\r\n\r\n/* General */\r\n\r\n.material-symbols-rounded {\r\n  font-variation-settings:\r\n  'FILL' 0,\r\n  'wght' 400,\r\n  'GRAD' 0,\r\n  'opsz' 48\r\n}\r\n\r\n.modal-overlay {\r\n    position: fixed;\r\n    left: 0;\r\n    top: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    z-index: 2;\r\n    display: flex;\r\n\r\n    background: #0008;\r\n}\r\n\r\n.modal-overlay.disabled {\r\n    display: none;\r\n    pointer-events: none;\r\n}\r\n\r\n.modal {\r\n    background: rgb(236, 236, 236) !important;\r\n    width: 360px;\r\n    height: auto;\r\n    padding: 0 30px;\r\n}\r\n\r\n.text-outlined, .button-big, .panel {\r\n    text-shadow:\r\n    -1px -1px 0px #fff8,\r\n    1px -1px 0px #fff8,\r\n    -1px 1px 0px #fff8,\r\n    1px 1px 0px #fff8;\r\n}\r\n\r\n.panel, .button-big, .button-small {\r\n    border: 4px solid #f5f5f5;\r\n    border-radius: var(--panel-border-radius);\r\n    background-color: #ffffff80;\r\n    box-shadow: var(--box-shadow-panel);\r\n}\r\n\r\n.button-big, .button-small {\r\n    min-width: 40px;\r\n    min-height: 30px;\r\n\r\n    background: linear-gradient(transparent, white 40%), linear-gradient(45deg, transparent 50%, #ffffff20 50%) -10px 0/ 20px 20px, #f0f0f0;\r\n    font-size: 18px;\r\n    margin: 20px 0;\r\n    padding: .2em 1.2em;\r\n    transition: scale .05s linear;\r\n}\r\n\r\n.button-big.highlight, .button-small.highlight {\r\n    background: linear-gradient(transparent, #ff7ad1), linear-gradient(45deg, transparent 50%, #ffffff20 50%) -10px 0/ 20px 20px, #ffabc4;\r\n}\r\n\r\n.button-big:hover, .button-small:hover {\r\n    background: #f3f3f3;\r\n}\r\n\r\n.button-big:active, .button-small:active {\r\n    scale: .98;\r\n    background: #ff70cd;\r\n}\r\n\r\n.button-big.disabled, .button-small.disabled {\r\n    filter: grayscale();\r\n}\r\n\r\n.button-small {\r\n    min-width: none;\r\n    min-height: none;\r\n    font-size: 8px;\r\n}\r\n\r\n.scroll-area {\r\n    overflow-y: scroll;\r\n    overflow-x: hidden;\r\n}\r\n\r\n.tooltip {\r\n    cursor: pointer;\r\n}\r\n\r\n.tooltip-content {\r\n    visibility: hidden;\r\n    opacity: 0;\r\n    position: absolute;\r\n    padding: .2em;\r\n    transition: opacity .2s ease-in-out;\r\n}\r\n\r\n.tooltip:hover > .tooltip-content, .tooltip:active > .tooltip-content {\r\n    visibility: visible;\r\n    opacity: 1;\r\n}\r\n\r\n.scene-header {\r\n    /* width: 90%; */\r\n    /* text-align: left; */\r\n    margin: 10px 0;\r\n}\r\n\r\n.vertical-flex {\r\n    display: flex;\r\n    flex-direction: column;\r\n}\r\n\r\n.horizontal-flex {\r\n    display: flex;\r\n    flex-direction: row;\r\n}\r\n\r\n/* Scene-specific */\r\n\r\n.logo-main {\r\n    width: 100%;\r\n    height: 100%;\r\n    background: #fff8;\r\n    z-index: -1;\r\n}\r\n\r\n.button-main {\r\n    margin: 10px;\r\n}\r\n\r\n.button-main::before {\r\n    content: '';\r\n    display: inline-block;\r\n    width: 1em;\r\n    height: 1em;\r\n    background: white;\r\n}\r\n\r\n.main-button-container {\r\n    position: absolute;\r\n    right: 0;\r\n    bottom: 0;\r\n}\r\n\r\n.gacha-info {\r\n    width: 300px;\r\n    height: 200px;\r\n}\r\n\r\n.button-gacha {\r\n    width: 140px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    margin: 10px;\r\n}\r\n\r\n.button-gacha > span {\r\n    font-size: .8em;\r\n}\r\n\r\n.cost {\r\n    margin: .1em;\r\n    padding: 0 10px;\r\n    background: #4e4e4e;\r\n    border-radius: 1em;\r\n    color: white;\r\n    text-shadow: none;\r\n}\r\n\r\n.cost::before {\r\n    content: '';\r\n    display: inline-block;\r\n    width: 1em;\r\n    height: 1em;\r\n    background: white;\r\n}\r\n\r\n.card-scene {\r\n    display: flex;\r\n    perspective: 800px;\r\n    filter: drop-shadow(#b594756c 0 0 80px);\r\n}\r\n\r\n.card {\r\n    /* border: 2px solid black; */\r\n    /* border-radius: 10px; */\r\n    /* width: 200px; */\r\n    /* transform: rotateY(45deg) rotateX(10deg); */\r\n    transition: transform 100ms ease-out, drap-shadow 100ms ease-out;\r\n}\r\n\r\n.card-scene:hover .card {\r\n    /* transition: transform 50ms ease-out; */\r\n}\r\n\r\n.card-image {\r\n    /* border: 7px solid #ffd700; */\r\n    /* border: 7px solid #B87333; */\r\n    /* border-radius: 12px; */\r\n}\r\n\r\n.card-image-spec {\r\n    position: absolute;\r\n    mask-image: radial-gradient(circle 150px at 50% 20%, black 40%, transparent);\r\n    /* transition: mask-image 150ms ease-out; */\r\n}\r\n\r\n.gacha-result-container {\r\n    /* width: var(--panel-max-width); */\r\n}\r\n\r\n.gacha-result {\r\n    width: 240px;\r\n    padding: 5px 20px;\r\n}\r\n\r\n.gacha-result > p {\r\n    position: relative;\r\n    text-align: left;\r\n    font-size: 16px;\r\n    opacity: 0;\r\n    transition: opacity .2s linear;\r\n    margin: .8em 0;\r\n}\r\n\r\n.gacha-result > p.show {\r\n    opacity: 1;\r\n}\r\n\r\n.chara-pic {\r\n    display: inline-block;\r\n    width: 24px;\r\n    height: 24px;\r\n    margin-right: .6em;\r\n    background-color: white;\r\n    border-radius: 4px;\r\n    border: 4px solid transparent;\r\n    /* box-shadow: gray 0 0 1px, ; */\r\n    box-shadow: var(--box-shadow-panel);\r\n    transition: scale .05s ease-in-out;\r\n    cursor: pointer;\r\n}\r\n\r\n.chara-pic.no-have {\r\n    filter: grayscale();\r\n}\r\n\r\n.chara-pic:hover {\r\n    box-shadow: white 0 0 var(--pic-glow-hover), var(--box-shadow-panel);\r\n    scale: 1.4;\r\n}\r\n\r\n.chara-pic:active {\r\n    scale: 1.25;\r\n}\r\n\r\n.rarity-2 {\r\n    background: #b0563d;\r\n}\r\n\r\n.rarity-2:hover {\r\n    /* box-shadow: #b0563d 0 0 var(--pic-glow-hover), var(--box-shadow-panel); */\r\n    /* box-shadow: white 0 0 var(--pic-glow-hover), var(--box-shadow-panel); */\r\n}\r\n\r\n.rarity-3 {\r\n    background: rgb(192, 192, 192);\r\n}\r\n\r\n.rarity-3:hover {\r\n    /* box-shadow: rgb(192, 192, 192) 0 0 var(--pic-glow-hover), var(--box-shadow-panel); */\r\n}\r\n\r\n.rarity-4 {\r\n    background: linear-gradient(135deg, #ff67ee, #37ecff) -5px -5px/ 40px 40px;\r\n}\r\n\r\n.rarity-4:hover {\r\n    /* box-shadow: #ff67ee 0 0 var(--pic-glow-hover), var(--box-shadow-panel); */\r\n}\r\n\r\n.chara-wrapper {\r\n    display: flex;\r\n    flex-direction: column;\r\n}\r\n\r\n.chara-level {\r\n    font-size: 12px;\r\n    margin-bottom: 4px;\r\n}\r\n\r\n.chara-level.no-have {\r\n    visibility: hidden;\r\n}\r\n\r\n.new {\r\n    margin-right: .4em;\r\n    color: #ff25b3;\r\n}\r\n\r\n.result-item-nick {\r\n    position: absolute;\r\n    font-size: 11px;\r\n    top: -6px;\r\n    margin-left: -3px;\r\n    color: gray;\r\n}\r\n\r\n.vertical-bottom {\r\n    vertical-align: bottom;\r\n}\r\n\r\n/* .rarity-1::before {\r\n    display: inline-block;\r\n    content: '';\r\n    width: 1em;\r\n    height: 1em;\r\n    background: linear-gradient(135deg, #eac1b6, #b0563d);\r\n    vertical-align: middle;\r\n    margin-right: .6em;\r\n} */\r\n\r\n.gacha-result-header {\r\n    /* font-size: 30px; */\r\n}\r\n\r\n.collection {\r\n    display: flex;\r\n    width: 300px;\r\n    height: var(--collection-height);\r\n\r\n    /* padding: 30px 0; */\r\n}\r\n\r\n.collection-viewport {\r\n    display: flex;\r\n    width: 280px;\r\n    height: var(--collection-inner-height);\r\n}\r\n\r\n.collection-inner {\r\n    margin: auto;\r\n    width: 100%;\r\n    /* height: 1000px; */\r\n    min-height: var(--collection-inner-height);\r\n    padding: 10px;\r\n\r\n    display: flex;\r\n    flex-flow: row wrap;\r\n    align-content: flex-start;\r\n    justify-content: start;\r\n}\r\n\r\n.collection-item {\r\n    margin: 5px;\r\n}\r\n\r\n\r\n/* Header & Footer */\r\nheader, footer {\r\n    z-index: 1;\r\n    position: fixed;\r\n    margin: 0 auto;\r\n    width: 100%;\r\n    max-width: var(--main-max-width);\r\n}\r\n\r\nheader {\r\n    top: 0;\r\n}\r\n\r\nfooter {\r\n    bottom: 0;\r\n}\r\n\r\n.notification {\r\n    position: absolute;\r\n    right: 0;\r\n    bottom: 0;\r\n    /* width: 100px;\r\n    height: 100px;\r\n    background-color: red; */\r\n    margin: 10px;\r\n\r\n    display: flex;\r\n    flex-flow: column-reverse;\r\n}\r\n\r\n.notification-item {\r\n    width: 260px;\r\n    background-color: white;\r\n    border-radius: 10px;\r\n    padding: .5em;\r\n    opacity: 0;\r\n    margin: -1em 0;\r\n\r\n    transition: opacity .1s linear, margin .1s linear;\r\n}\r\n\r\n.notification-item.show {\r\n    opacity: 1;\r\n    margin: .2em 0;\r\n}\r\n\r\n.credit {\r\n    position: absolute;\r\n    right: 0;\r\n    top: 0;\r\n    margin: 10px;\r\n\r\n    border-radius: 2em;\r\n    padding: 0 1em;\r\n    padding-bottom: .3em;\r\n}\r\n\r\n.credit::before {\r\n    content: '';\r\n    /* z-index: 1; */\r\n    display: inline-block;\r\n    position: relative;\r\n    left: 0;\r\n    width: 1em;\r\n    height: 1em;\r\n    background-color: white;\r\n    margin-right: .6em;\r\n    vertical-align: middle;\r\n}\r\n\r\n.credit .tooltip-content {\r\n    width: 200px;\r\n    right: -3px;\r\n    top: calc(100% + 12px);\r\n}\r\n\r\n.header-left-container {\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n}\r\n\r\n.header-left-container>* {\r\n    margin: 10px;\r\n}\r\n\r\n.previous {\r\n}",""]);const s=o},645:n=>{n.exports=function(n){var r=[];return r.toString=function(){return this.map((function(r){var e="",t=void 0!==r[5];return r[4]&&(e+="@supports (".concat(r[4],") {")),r[2]&&(e+="@media ".concat(r[2]," {")),t&&(e+="@layer".concat(r[5].length>0?" ".concat(r[5]):""," {")),e+=n(r),t&&(e+="}"),r[2]&&(e+="}"),r[4]&&(e+="}"),e})).join("")},r.i=function(n,e,t,i,a){"string"==typeof n&&(n=[[null,n,void 0]]);var o={};if(t)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(o[c]=!0)}for(var l=0;l<n.length;l++){var h=[].concat(n[l]);t&&o[h[0]]||(void 0!==a&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=a),e&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=e):h[2]=e),i&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=i):h[4]="".concat(i)),r.push(h))}},r}},81:n=>{n.exports=function(n){return n[1]}},379:n=>{var r=[];function e(n){for(var e=-1,t=0;t<r.length;t++)if(r[t].identifier===n){e=t;break}return e}function t(n,t){for(var a={},o=[],s=0;s<n.length;s++){var c=n[s],l=t.base?c[0]+t.base:c[0],h=a[l]||0,d="".concat(l," ").concat(h);a[l]=h+1;var p=e(d),u={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)r[p].references++,r[p].updater(u);else{var m=i(u,t);t.byIndex=s,r.splice(s,0,{identifier:d,updater:m,references:1})}o.push(d)}return o}function i(n,r){var e=r.domAPI(r);return e.update(n),function(r){if(r){if(r.css===n.css&&r.media===n.media&&r.sourceMap===n.sourceMap&&r.supports===n.supports&&r.layer===n.layer)return;e.update(n=r)}else e.remove()}}n.exports=function(n,i){var a=t(n=n||[],i=i||{});return function(n){n=n||[];for(var o=0;o<a.length;o++){var s=e(a[o]);r[s].references--}for(var c=t(n,i),l=0;l<a.length;l++){var h=e(a[l]);0===r[h].references&&(r[h].updater(),r.splice(h,1))}a=c}}},569:n=>{var r={};n.exports=function(n,e){var t=function(n){if(void 0===r[n]){var e=document.querySelector(n);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(n){e=null}r[n]=e}return r[n]}(n);if(!t)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");t.appendChild(e)}},216:n=>{n.exports=function(n){var r=document.createElement("style");return n.setAttributes(r,n.attributes),n.insert(r,n.options),r}},565:(n,r,e)=>{n.exports=function(n){var r=e.nc;r&&n.setAttribute("nonce",r)}},795:n=>{n.exports=function(n){var r=n.insertStyleElement(n);return{update:function(e){!function(n,r,e){var t="";e.supports&&(t+="@supports (".concat(e.supports,") {")),e.media&&(t+="@media ".concat(e.media," {"));var i=void 0!==e.layer;i&&(t+="@layer".concat(e.layer.length>0?" ".concat(e.layer):""," {")),t+=e.css,i&&(t+="}"),e.media&&(t+="}"),e.supports&&(t+="}");var a=e.sourceMap;a&&"undefined"!=typeof btoa&&(t+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),r.styleTagTransform(t,n,r.options)}(r,n,e)},remove:function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(r)}}}},589:n=>{n.exports=function(n,r){if(r.styleSheet)r.styleSheet.cssText=n;else{for(;r.firstChild;)r.removeChild(r.firstChild);r.appendChild(document.createTextNode(n))}}},131:(n,r,e)=>{var t=e(379),i=e.n(t),a=e(795),o=e.n(a),s=e(569),c=e.n(s),l=e(565),h=e.n(l),d=e(216),p=e.n(d),u=e(589),m=e.n(u),g=e(426),f={};f.styleTagTransform=m(),f.setAttributes=h(),f.insert=c().bind(null,"head"),f.domAPI=o(),f.insertStyleElement=p(),i()(g.Z,f),g.Z&&g.Z.locals&&g.Z.locals;const b=(n,r,...e)=>{const t=document.createElement(n),i=e?.length||0;for(let n=0;n<i;n++)t.classList.add(e[n]);return r&&r.appendChild(t),t},x=(n,r)=>(n=Math.ceil(n),r=Math.floor(r),Math.floor(Math.random()*(r-n))+n),v=n=>{for(;n.firstChild;)n.removeChild(n.firstChild)},y=()=>{const n=new Date;return 1e4*n.getFullYear()+100*(n.getMonth()+1)+n.getDate()},w=JSON.parse('{"rikka":{"name":"타카나시 릿카","rarity":"2","nick":"","anime":"chunikoi","version":"0.1.0"},"kumiko":{"name":"오마에 쿠미코","rarity":"3","nick":"","anime":"eupho","version":"0.1.0"},"hazuki":{"name":"카토 하즈키","rarity":"2","nick":"","anime":"eupho","version":"0.1.0"},"sapphire":{"name":"카와시마 사파이어","rarity":"2","nick":"","anime":"eupho","version":"0.1.0"},"reina":{"name":"코사카 레이나","rarity":"3","nick":"사랑의 고백","anime":"eupho","version":"0.1.0"},"violet":{"name":"바이올렛 에버가든","rarity":"2","nick":"","anime":"violet","version":"0.1.0"},"houtarou":{"name":"오레키 호타로","rarity":"3","nick":"","anime":"hyouka","version":"0.1.0"},"eru":{"name":"치탄다 에루","rarity":"3","nick":"키니나리마스!","anime":"hyouka","version":"0.1.0"},"satoshi":{"name":"후쿠베 사토시","rarity":"2","nick":"","anime":"hyouka","version":"0.1.0"},"mayaka":{"name":"이바라 마야카","rarity":"2","nick":"","anime":"hyouka","version":"0.1.0"},"tamako":{"name":"키타시라카와 타마코","rarity":"3","nick":"","anime":"tamako","version":"0.1.0"},"yui":{"name":"히라사와 유이","rarity":"4","nick":"경음부","anime":"keion","version":"0.1.0"},"mio":{"name":"아키야마 미오","rarity":"4","nick":"","anime":"keion","version":"0.1.0"},"ritsu":{"name":"타이나카 리츠","rarity":"4","nick":"","anime":"keion","version":"0.1.0"},"tsumugi":{"name":"코토부키 츠무기","rarity":"4","nick":"","anime":"keion","version":"0.1.0"},"azusa":{"name":"나카노 아즈사","rarity":"3","nick":"","anime":"keion","version":"0.1.0"},"shouko":{"name":"니시미야 쇼코","rarity":"2","nick":"","anime":"koekata","version":"0.1.0"},"haruka":{"name":"오가사와라 하루카","rarity":"2","nick":"","anime":"eupho","version":"0.1.0"}}'),k=[0,0,4],T="kyogacha_save",S=[0,885,85,30],C=class{#n;#r;#e;constructor(n,r){this.#n={},this.#r={},this.#e=[];for(let n=0;n<=4;n++)this.#r[n]=[];if(n)try{for(const r in n)this.add(r,n[r])}catch(n){console.log("Failed to load store"),console.log(n),r?.(n)}}getAll(){return this.#e}count(n){return this.#r[n].length}getByKey(n){return this.#n[n]??null}getByIndex(n,r){return this.#r[n][r]??null}getRandom(n){const r=x(0,this.count(n));return this.getByIndex(n,r)}add(n,r=null){if(void 0!==this.#n[n])return;const e=new class{key;name;nick;rarity;get star(){return"★".repeat(this.rarity)}version;date;level;obtained;#t;get bNew(){const n=this.#t;return this.#t=!1,n}set bNew(n){this.#t=n}constructor(n,r=null){this.key=n??"null";const e=w[n];this.name=r?.name??e.name,this.rarity=r?.rarity??e.rarity,this.nick=r?.nick??e.nick??"",this.version=r?.version??e.version,this.date=r?.date??0,this.level=r?.level??1,this.obtained=r?.obtained??!1,this.#t=!1}}(n,r);this.#n[n]=e,this.#r[0].push(e),this.#r[e.rarity].push(e),this.#e.push(e)}find(n){return this.#n[n]??null}serialize(){const n=this.extract();return JSON.stringify(n)}extract(){const n={};for(const r in this.#n){const e=this.#n[r];n[r]={date:e.date,obtained:e.obtained}}return n}};class N{game;get main(){return this.game.main}sceneKey;#i;get sceneName(){return this.#i}set sceneName(n){this.#i=n,this.#a.innerText=n}#a;constructor(n){this.game=n,this.sceneKey=0,this.#a=b("h2",this.main,"scene-header"),this.sceneName=""}close(){v(this.main)}onopen(){}}class L extends N{constructor(n){super(n),b("div",this.main,"logo-main").innerText="제작중";const r=b("div",this.main,"main-button-container","vertical-flex"),e=b("button",r,"button-big","button-main","to-gacha");e.innerText="가챠",e.onclick=()=>{n.openScene(M)};const t=b("button",r,"button-big","button-main");t.innerText="편성",t.onclick=()=>{n.openScene(I)},b("button",r,"button-big","button-main","highlight","disabled").innerText="활동"}}class M extends N{constructor(n){super(n),this.sceneName="가챠";const r=b("div",this.main,"gacha-info-container","vertical-flex");b("div",r,"panel","gacha-info").innerText="통상 가챠";const e=b("div",r,"gacha-button-container","horizontal-flex"),t=b("button",e,"button-big","button-gacha");b("span",t).innerText="1회 뽑기",b("span",t,"cost").innerText="300",t.onclick=()=>{n.doGacha(1)};const i=b("button",e,"button-big","button-gacha");b("span",i).innerText="10회 뽑기",b("span",i,"cost").innerText="3000",i.onclick=()=>{n.doGacha(10)}}}class A extends N{gachaResult;constructor(n){super(n),this.sceneKey=1,this.sceneName="가챠 결과";const r=b("div",this.main,"gacha-result-container");b("h2",r,"gacha-result-header","hidden").innerText="캐릭터 획득!",this.gachaResult=b("div",r,"gacha-result","panel");const e=b("button",r,"gacha-again","button-big");e.innerText="확인",e.onclick=()=>{n.openLastScene()}}}class I extends N{collectionInner;constructor(n){super(n),this.sceneKey=2;const r=b("div",this.main);this.sceneName="캐릭터";const e=b("div",r,"panel","collection"),t=b("div",e,"collection-viewport","scroll-area");this.collectionInner=b("div",t,"collection-inner");const i=b("button",r,"button-big");i.innerText="확인",i.onclick=()=>{this.game.openLastScene()}}onopen(){super.onopen(),this.game.populateCollection()}}new class{main;header;footer;#o;#n;get#s(){return this.#c.obtained}#c;#l;#h;#d;#p;#u;#m;#g;get#f(){return this.scene?.gachaResult??null}get#b(){return this.scene?.collectionInner??null}#x;#v;#y;scene;currentSceneClass;lastSceneClass;constructor(){console.log(y()),this.header=b("header",document.body);const n=b("div",this.header,"credit","panel","tooltip");this.#x=b("span",n),b("span",n,"panel","tooltip-content").innerText="로그인 보너스와 활동을 통해\n추가 요몽석을 얻으세요!";const r=b("div",this.header,"header-left-container","horizontal-flex"),e=b("button",r,"previous","button-big","material-symbols-rounded");e.innerText="home",e.onclick=()=>{this.openScene(L)};const t=b("button",r,"button-small","highlight");t.innerText="리셋",t.onclick=()=>{this.openModal({title:"리셋",desc:"확인을 누르면 모든 데이터가 사라집니다.\n취소하시려면 페이지를 새로고침하세요.",highlight:!0,onclick:()=>{this.#c.reset()}})},this.main=b("main",document.body),this.footer=b("footer",document.body),this.#v=b("div",this.footer,"notification"),this.#o=b("div",document.body,"modal-overlay","disabled"),this.#n=new C(w),this.#c=new class{#w;obtained;credit;lastLogin;player;constructor(n=(()=>{})){this.#w=n;let r=localStorage.getItem(T)??"{}";const e=JSON.parse(r);this.obtained=new C(e?.obtained??{},(()=>{this.#k()})),this.credit=e&&void 0!==e.credit&&"number"==typeof e.credit?e.credit:12999,this.lastLogin=e?.lastLogin??{},this.player=e?.player??{}}#k(){this.reset()}reset(){localStorage.removeItem(T),location.reload()}save(){const n=JSON.stringify({version:k,obtained:this.obtained.extract(),credit:this.credit,lastLogin:this.lastLogin,player:this.player});localStorage.setItem(T,n),this.#w()}getFull(){const n=new C(w).getAll(),r=this.obtained.getAll();for(const e of r){const r=n.findIndex((n=>e.key===n.key));-1!==r&&(n[r]=e)}return n}saveLogin(){this.lastLogin.date=y(),this.lastLogin.version=k,this.save()}}((()=>{this.#T("저장되었습니다!")}));const i=this.#c.lastLogin;if(void 0===i.version)this.openModal({title:"신규 데이터 알림",desc:"이 브라우저에 저장된 데이터가 없습니다.\n신규 플레이 데이터를 작성합니다.",highlight:!0,onclick:n=>{this.#c.saveLogin(),this.closeModal(n)}});else switch(((n,r)=>{console.log(n,r);for(let e=0;e<3;e++){if(n[e]>r[e])return 1;if(n[e]<r[e])return-1}return 0})(i.version,k)){case 1:this.openModal({title:"버전 불일치",desc:"이 브라우저에 저장된 데이터로 플레이할 수 없습니다.\n확인을 누르면 기존 데이터를 삭제합니다.\n (주의: 삭제된 데이터는 복구할 수 없습니다!)",highlight:!0,onclick:n=>{this.#c.reset()}});break;case-1:this.openModal({title:"버전 업데이트",desc:"게임이 업데이트 되었습니다.",onclick:n=>{this.#c.saveLogin(),this.closeModal(n)}});break;default:this.#c.saveLogin()}this.#x.innerText=this.#c.credit,this.#y=new Array(4);let a=0;for(let n=0;n<4;n++)a+=S[n],this.#y[n]=a;this.currentSceneClass=null,this.lastSceneClass=null,this.openScene(L)}testGacha(n=1){return this.#c.credit-300*n}doGacha(n=1){const r=this.testGacha(n);if(r<0)this.openModal({title:"가챠 불가",desc:"가챠에 필요한 요몽석이 부족합니다!"});else if(this.openScene(A),this.#S(r),!(n<1||n>10)){v(this.#f);for(let r=0;r<n;r++){const n=this.#C();setTimeout((()=>{n?.classList.add("show")}),100+150*r)}}}#C(){const n=x(0,1e3);let r=1;for(let e=1;e<4;e++)this.#y[e-1]<n&&n<=this.#y[e]&&(r=e+1);const e=this.#n.getRandom(r);if(null===e)return console.error(`dice: ${n}, rarity: ${r}`),null;let t=!1;null===this.#s.find(e.key)&&(e.date=y(),e.obtained=!0,this.#s.add(e.key,e),t=!0);const i=b("p",this.#f);this.#N(i,e),t&&(b("span",i,"new").innerText="New!");let a="no-effect";return""!==e.nick&&(b("span",i,"result-item-nick").innerText=`《${e.nick}》`,a="vertical-bottom"),b("span",i,"result-item-name",a).innerText=e.name,i}populateCollection(n=!1){let r;r=n?this.#c.getFull().sort(((n,r)=>r.date-n.date)):this.#c.obtained.getAll().sort(((n,r)=>r.date-n.date));for(const n of r){console.log(n.date);const r=b("div",this.#b,"chara-wrapper"),e=this.#N(r,n);e.classList.add("collection-item");const t=b("span",r,"chara-level");t.innerText=`Lv. ${n.level}`,n.obtained||(e.classList.add("no-have"),t.classList.add("no-have"))}}openModal(n={}){this.#o.classList.remove("disabled");const r=b("div",this.#o,"panel","modal");b("h3",r,"modal-title").innerText=n.title??"경고",b("p",r,"modal-desc").innerText=n.desc??"알 수 없는 내용";const e=b("button",r,"button-big","modal-button");n.highlight&&e.classList.add("highlight"),e.innerText=n.button??"확인",n.onclick?e.onclick=()=>{n.onclick?.(r)}:e.onclick=()=>{this.closeModal(r)}}closeModal(n){this.#o.removeChild(n),0===this.#o.childElementCount&&this.#o.classList.add("disabled")}#N(n,r){const e=b("object",n,`rarity-${r.rarity}`,"chara-pic"),t=`/image/${r.key}.png`;return e.data=t,e.type="image/png",b("img",e).src="/gacha-demo"+t,e}#T(n){console.log("HERE");const r=b("div",this.#v,"notification-item");r.innerText=n??"알림!",setTimeout((()=>{r.classList.add("show")}),100),setTimeout((()=>{r.classList.remove("show")}),2500),setTimeout((()=>{this.#v.removeChild(r)}),2600)}#S(n){let r=this.#c.credit;if(n===r)return;this.#c.credit=n,this.#c.save();let e=Math.max(Math.floor(Math.abs(r-n)/40),1);e*=n>r?1:-1;let t=0;const i=setInterval((()=>{if(t++,40===t)return this.#x.innerText=n,clearInterval(i);r+=e,this.#x.innerText=r+""}),20)}openScene(n){this.scene&&this.scene.close(),this.scene=new n(this),this.scene.onopen(),this.lastSceneClass=this.currentSceneClass,this.currentSceneClass=n}openLastScene(){this.openScene(this.lastSceneClass)}}}},n=>{n(n.s=131)}]);